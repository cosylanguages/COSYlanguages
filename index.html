<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>COSYlanguages</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    /* Add some styling for the images */
    .vocab-image {
      max-width: 200px; /* Make images smaller */
      max-height: 200px;
      cursor: pointer; /* Show pointer cursor to indicate clickability */
      margin: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    
    .image-container {
      position: relative;
      display: inline-block;
    }
    
    .image-caption {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background-color: rgba(0,0,0,0.7);
      color: white;
      padding: 5px;
      text-align: center;
      display: none; /* Initially hidden */
    }
  </style>
</head>
<body>

  <h1>COSYlanguages</h1>

  <div id="selectors-container">
    <!-- Rest of your existing HTML remains the same -->
    <div class="selector-group" id="language-day-selectors">
      <label for="language-select">Choose language:</label>
      <select id="language-select">
        <option value="">--Select Language--</option>
        <option value="COSYenglish" data-bg="COSYenglish">COSYenglish</option>
        <option value="COSYfrançais" data-bg="COSYfrançais">COSYfrançais</option>
        <option value="COSYitaliano" data-bg="COSYitaliano">COSYitaliano</option>
        <option value="COSYespañol" data-bg="COSYespañol">COSYespañol</option>
        <option value="COSYportuguês" data-bg="COSYportuguês">COSYportuguês</option>
        <option value="COSYdeutsch" data-bg="COSYdeutsch">COSYdeutsch</option>
        <option value="ΚΟΖΥελληνικά" data-bg="ΚΟΖΥελληνικά">ΚΟΖΥελληνικά</option>
        <option value="ТАКОЙрусский" data-bg="ТАКОЙрусский">ТАКОЙрусский</option>
        <option value="ԾՈՍՅհայկական" data-bg="ԾՈՍՅհայկական">ԾՈՍՅհայկական</option>
      </select>

      <label for="day-select" id="day-label">Choose day:</label>
      <select id="day-select">
        <option value="">--Select Day--</option>
        <option value="1">Day 1</option>
        <option value="2">Day 2</option>
        <option value="3">Day 3</option>
      </select>
    </div>

    <div class="selector-group" id="day-range-practice-selectors">
      <label for="day-from-select">Day from:</label>
      <select id="day-from-select" style="width: 80px;">
        <option value="">From</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
      </select>

      <label for="day-to-select">Day to:</label>
      <select id="day-to-select" style="width: 80px;">
        <option value="">To</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
      </select>

      <label for="practice-type-select">Type of practice:</label>
      <select id="practice-type-select" style="min-width: 160px;">
        <option value="">--Select Practice--</option>
        <option value="random_word">Random Word</option>
        <option value="random_image">Random Image</option>
        <option value="random_grammar">Random Grammar</option>
        <option value="random_speaking">Random Speaking</option>
      </select>
    </div>

    <button id="show-button">Show</button>
  </div>

  <div id="result-container"></div>

  <script>
    // Data sets with full phrases/statements
    const vocabData = {
      COSYenglish: {
        1: ["Hello", "Goodbye", "Yes", "No", "Thank you", "You're welcome"],
        2: ["Boy", "Girl", "Teacher", "Student", "Woman", "Man", "Person", "Thing", "What", "Who", "Nice to meet you", "For me", "Drink", "No problem"],
        3: ["Mother", "Father", "Son", "Daughter", "Sister", "Brother", "Husband", "Wife", "Friend"],
        4: ["Zero", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine"],
        5: ["Good", "Bad", "Easy", "Difficult", "Boring", "Interesting", "Big", "Small", "Hot", "Cold", "Cheap", "Expensive"],
        6: []
      },
      COSYfrançais: {
        1: ["Bonjour", "Au revoir", "Oui", "Non", "Merci", "De rien"],
        2: ["Le garçon", "La fille", "Le professeur", "La professeur", "L'étudiant", "L'étudiante", "La femme", "L'homme", "La personne", "La chose", "Enchanté.e", "Pour moi", "La boission", "Pas de problème"],
        3: ["La mère", "Le père", "Le fils", "La fille", "La sœur", "Le frère", "Le mari", "La femme", "L'ami", "L'amie"],
      },
      COSYitaliano: {
        1: ["Buongiorno", "Arrivederci", "Sì", "No", "Grazie", "Prego"], 
        2: ["Il ragazzo", "La ragazza", "Il professore", "La professoressa", "Lo studente", "La studentessa", "La donna", "L'uomo", "La persona", "La cosa", "Piacere", "Per me", "La bevanda", "Nessun problema"],
        3: ["la madre", "Il padre", "Il figlio", "La figlia", "La sorella", "Fratello", "Marito", "Moglie", "Amico/a"]
      },
      COSYespañol: {
        
      },
      COSYportuguês: {
        
      },
      COSYdeutsch: {
        
      },
      ΚΟΖΥελληνικά: {
        1: ["Γειά σου", "Αντίο", "Όχι", "Ναι", "Ευχαριστώ", "Παρακαλώ"],
        2: ["Το αγόρι", "Το κορίτσι", "Ο δάσκαλος", "Η δασκάλα", "Ο μαθητής", "Η μαθήτρια", "Η γυναίκα", "Ο άντρας", "Το άτομο", "Το πράγμα", "Χαίρω πολύ", "Για μένα", "Το ποτό", "Κανένα πρόβλημα"],
        3: ["Μητέρα", "Πατέρας", "Γιος", "Κόρη", "Αδερφή", "Αδερφός", "Σύζυγος", "Σύζυγος", "Φίλος/Φίλη"]
      },
      ТАКОЙрусский: {
        
      },
      ԾՈՍՅհայկական: {

      }
    };

    const grammarData = {
      COSYenglish: {    
        2: [
          "I",
          "You",
          "He",
          "She",
          "It",
          "am",
          "are",
          "is"
        ],
        3: [
          "I",
          "You",
          "He",
          "She",
          "It",
          "have",
          "has",
          
          "Possessives (examples): my mother, your sister, his son, her husband."
        ]
      },
      COSYfrançais: {
        2: [
          "Je",
          "Tu",
          "Il",
          "Elle",
          "Ce",
          "suis",
          "es",
          "est"
        ],
        3: [
          "J'",
          "Tu",
          "Il",
          "Elle",
          "Ce",
          "ai",
          "as",
          "a"
          "Possessifs (exemples) : ma mère, ta sœur, son fils, son mari."
        ]
      },
      COSYitaliano: {
        2: [
         "Io",
          "Tu",
          "Lui",
          "Lei",
          "sono",
          "sei",
          "è"
        ],
        3: [
          "Io",
          "Tu",
          "Lui",
          "Lei",
          "ho",
          "hai",
          "ha"
          "Possessivi (esempi): mia madre, tua sorella, suo figlio, suo marito."
        ]
      },
      COSYespañol: {
        
      },
      COSYportuguês: {
        
      },
      COSYdeutsch: {
        
      },
      ΚΟΖΥελληνικά: {
        2: [
         "Εγώ",
          "Εσύ",
          "Αυτός",
          "Αυτή",
          "Αυτό",
          "είμαι",
          "είσαι",
          "είναι"
        ],
        3: [
          "Εγώ",
          "Εσύ",
          "Αυτός",
          "Αυτή",
          "Αυτό",
          "έχω",
          "έχεις",
          "έχει"
          "Κτητικές αντωνυμίες (παραδείγματα): η μητέρα μου, η αδερφή σου, ο γιος του, ο σύζυγός της."
        ]
      },
      ТАКОЙрусский: {
        
      },
       ԾՈՍՅհայկական: {

      }
    };

    const speakingData = {
      COSYenglish: {
        1: [ 
          "Coffee or tea? Cash or card?"
        ],
        2: [
          "Who are you? (name, man or woman, student or teacher?)",
          "Name 3 popular people (name, man or woman?)",
          "Name 3 people (name, man or woman?)"
        ],
        3: [
          "My family, my friend and his/her family, drinks you have."
        ]
      },
      COSYfrançais: {
        1: [ 
          "Café ou thé? Espèces ou carte?"
        ],
        2: [
          "Qui es-tu? (le nom, homme ou femme, étudiant.e ou professeur?)",
          "Nommez 3 personnes populaires (le nom, homme ou femme?)",
          "Nommez 3 personnes (le nom, homme ou femme?)"
        ],
        3: [
          "Ma famille, mon ami et sa famille, les boissons que tu prends."
        ]
      },
      COSYitaliano: {
        1: [ 
          "Caffè o tè? Contanti o carta?"
        ],
        2: [
          "Chi sei? (il nome, uomo o donna, studente.ssa o professore.ssa?)",
          "Nome 3 persone popolari (il nome, uomo o donna?)",
          "Nome 3 persone (il nome, uomo o donna?)"
        ],
        3: [
          "La mia famiglia, il mio amico e la sua famiglia, le bevande che prendi."
        ]
      },
      COSYespañol: {
      
      },
      COSYportuguês: {
        
      },
      COSYdeutsch: {
        
      },
      ΚΟΖΥελληνικά: {
        1: [
          "Καφέ ή τσάι; Μετρητά ή κάρτα;",
        ],
        2: [
          "Ποιος είσαι; (το όνομα, άντρας ή γυναίκα, μαθητής.ρια ή δάσκαλος.α;)",
          "Ονομάστε 3 δημοφιλή άτομα (το όνομα, άντρας ή γυναίκα;)",
          "Ονομάστε 3 άτομα (το όνομα, άντρας ή γυναίκα;)"
        ],
        3: [
          "Η οικογένειά μου, ο φίλος μου και η οικογένειά του/της, τα ποτά που πίνεις."
        ]
      },
      ТАКОЙрусский: {
        
      },
       ԾՈՍՅհայկական: {

      }
    };

    // 1. UNIFIED IMAGE DATA - same images for all languages
    const imageData = {
      allLanguages: {
        1: [
          { src: "https://knowt-user-attachments.s3.amazonaws.com/d1b268c8-b4a8-448f-b332-5f8b25d5e673.jpg", alt: "Hello", 
            translations: {
              COSYenglish: "Hello",
              COSYfrançais: "Bonjour",
              COSYitaliano: "Buongiorno",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "Γεια σου",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/65d8a23f-f954-438a-b24a-7fb488fc3826.jpg", alt: "Goodbye",
            translations: {
              COSYenglish: "Goodbye",
              COSYfrançais: "Au revoir",
              COSYitaliano: "Arrivederci",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "Αντίο",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/90fa8c25-9aba-424e-a7fd-adcfdd22cccd.jpg", alt: "Yes",
            translations: {
              COSYenglish: "Yes",
              COSYfrançais: "Oui",
              COSYitaliano: "Sì",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "Ναι",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/490e0478-36f3-4f3f-90e0-f1ac3a63be42.jpg", alt: "No",
            translations: {
              COSYenglish: "No",
              COSYfrançais: "Non",
              COSYitaliano: "No",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "Όχι",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/382b39c4-db7d-4fe0-a5d1-fc560bfabfd4.jpg", alt: "Thank you",
            translations: {
              COSYenglish: "Thank you",
              COSYfrançais: "Merci",
              COSYitaliano: "Grazie",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "Ευχαριστώ",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/3cde6331-ebd8-443d-876b-c7100f7cfc9d.jpg", alt: "You're welcome",
            translations: {
              COSYenglish: "You're welcome",
              COSYfrançais: "De rien",
              COSYitaliano: "Prego",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "Παρακαλώ",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/a7c44794-c2d9-4a27-93c4-42827de4025e.jpg", alt: "Alright",
            translations: {
              COSYenglish: "Alright",
              COSYfrançais: "D'accord",
              COSYitaliano: "Bene",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "Εντάξει",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/ddc67279-12a7-497d-a260-0b6f0c24fc87.jpg", alt: "Sorry",
            translations: {
              COSYenglish: "Sorry",
              COSYfrançais: "Désolé.e",
              COSYitaliano: "Scusi.a",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "Συγνώμη",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/3451f95e-17be-4cb7-a595-8228443a8bd1.jpg", alt: "Water",
            translations: {
              COSYenglish: "Water",
              COSYfrançais: "L'eau",
              COSYitaliano: "L'acqua",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "το νερό",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/9e4a4ad3-1dbb-40f7-bb45-d167b39e4a74.jpg", alt: "Juice",
            translations: {
              COSYenglish: "Juice",
              COSYfrançais: "Le jus",
              COSYitaliano: "Il succo",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "ο χυμός",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/3bc85631-fdfe-4541-a663-d1f1cbbe386a.jpg", alt: "Beer",
            translations: {
              COSYenglish: "Beer",
              COSYfrançais: "La bière",
              COSYitaliano: "La birra",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "η μπύρα",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/45878c62-cc5f-47fe-ae32-59847af15bda.jpg", alt: "Wine",
            translations: {
              COSYenglish: "Wine",
              COSYfrançais: "Le vin",
              COSYitaliano: "Il vino",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "το κρασί",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/830e8e98-43e7-4dc8-9d87-4c3fef5e2890.jpg", alt: "Coffee",
            translations: {
              COSYenglish: "Coffee",
              COSYfrançais: "Le café",
              COSYitaliano: "Il caffè",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "ο καφές",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/6a4e0b1d-f9ee-4a2b-a2f9-9dabef5ff864.jpg", alt: "Tea",
            translations: {
              COSYenglish: "Tea",
              COSYfrançais: "Le thé",
              COSYitaliano: "Il tè",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "το τσάι",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/64259323-b73a-4c2b-80ab-4c5271331bf0.jpg", alt: "Card",
            translations: {
              COSYenglish: "Card",
              COSYfrançais: "La carte",
              COSYitaliano: "La carta",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "η κάρτα",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/c1a57a8c-d319-458a-ab77-dcda4b675b37.jpg", alt: "Cash",
            translations: {
              COSYenglish: "Cash",
              COSYfrançais: "Les espèces",
              COSYitaliano: "I contanti",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "τα μετρητά",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
        ],
        2: [
          { src: "https://knowt-user-attachments.s3.amazonaws.com/58492698-ae86-4d3a-8fc5-a22b55b2aa00.jpg", alt: "Person",
            translations: {
              COSYenglish: "Person",
              COSYfrançais: "La personne",
              COSYitaliano: "La persona",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "το άτομο",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/dda78a79-0f1a-4aa2-a6a6-050f891fc3f9.jpg", alt: "Thing",
            translations: {
              COSYenglish: "Thing",
              COSYfrançais: "La chose",
              COSYitaliano: "La cosa",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "το πράγμα",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/19c27994-8d24-4dd9-ae36-68fea5cda79b.jpg", alt: "Woman",
            translations: {
              COSYenglish: "Woman",
              COSYfrançais: "La femme",
              COSYitaliano: "La donna",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "η γυναίκα",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/bbb56ff3-c6ec-438a-834b-aa120d862856.jpg", alt: "Man",
            translations: {
              COSYenglish: "Man",
              COSYfrançais: "L'homme",
              COSYitaliano: "L'uomo",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "ο άντρας",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/1635fa13-3874-4310-b895-1a4c905e2f91.jpg", alt: "Girl",
            translations: {
              COSYenglish: "Girl",
              COSYfrançais: "La fille",
              COSYitaliano: "La ragazza",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "το κορίτσι",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/ba646c3b-dbd1-47a4-89ef-aaf0a4ae14b3.jpg", alt: "Boy",
            translations: {
              COSYenglish: "Boy",
              COSYfrançais: "Le garçon",
              COSYitaliano: "Il ragazzo",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "το αγόρι",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/41280cd4-99a6-4217-930a-7084b28ce44f.jpg", alt: "Student",
            translations: {
              COSYenglish: "Student",
              COSYfrançais: "L'étudiante",
              COSYitaliano: "La studentessa",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "η μαθήτρια",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/df25f307-75ec-4302-9cdf-3a2717142c46.jpg", alt: "Student",
            translations: {
              COSYenglish: "Student",
              COSYfrançais: "L'étudiant",
              COSYitaliano: "Lo studente",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "ο μαθητής",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/685a6f52-53b1-4e8d-9f1b-2dfb606d737c.jpg", alt: "Teacher",
            translations: {
              COSYenglish: "Teacher",
              COSYfrançais: "La professeur",
              COSYitaliano: "La professoressa",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "η δασκάλα",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/b9578d45-6894-47be-b7f4-751763537360.jpg", alt: "Teacher",
            translations: {
              COSYenglish: "Teacher",
              COSYfrançais: "Le professeur",
              COSYitaliano: "Il professore",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "ο δάσκαλος",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
          { src: "https://knowt-user-attachments.s3.amazonaws.com/69591591-9112-49ec-a554-f1d055855c5e.jpg", alt: "Nice to meet you",
            translations: {
              COSYenglish: "Nice to meet you",
              COSYfrançais: "Enchanté.e",
              COSYitaliano: "Piacere",
              COSYespañol: "",
              COSYportuguês: "",
              COSYdeutsch: "",
              ΚΟΖΥελληνικά: "Χαίρω πολύ",
              ТАКОЙрусский: "",
              ԾՈՍՅհայկական: ""
            }
          },
        ],
        3: [
          { src: "https://i.imgur.com/m4wKJ8f.jpg", alt: "Mother and son",
            translations: {
              COSYenglish: "Mother and son",
              COSYfrançais: "Mère et fils",
              COSYitaliano: "Madre e figlio",
              COSYespañol: "Madre e hijo",
              COSYportuguês: "Mãe e filho",
              COSYdeutsch: "Mutter und Sohn",
              ΚΟΖΥελληνικά: "Μητέρα και γιος",
              ТАКОЙрусский: "Мать и сын",
              ԾՈՍՅհայկական: "Մայր և որդի"
            }
          },
          { src: "https://i.imgur.com/oV9fN3L.jpg", alt: "Family photo",
            translations: {
              COSYenglish: "Family photo",
              COSYfrançais: "Photo de famille",
              COSYitaliano: "Foto di famiglia",
              COSYespañol: "Foto familiar",
              COSYportuguês: "Foto de família",
              COSYdeutsch: "Familienfoto",
              ΚΟΖΥελληνικά: "Οικογενειακή φωτογραφία",
              ТАКОЙрусский: "Семейное фото",
              ԾՈՍՅհայկական: "Ընտանեկան լուսանկար"
            }
          }
        ]
      }
    };

    // 2. IMPROVED VOICE HANDLING
    const voiceLanguageMap = {
      COSYenglish: { lang: "en-US", voiceURI: "Google US English" },
      COSYfrançais: { lang: "fr-FR", voiceURI: "Google français" },
      COSYitaliano: { lang: "it-IT", voiceURI: "Google italiano" },
      COSYespañol: { lang: "es-ES", voiceURI: "Google español" },
      COSYportuguês: { lang: "pt-PT", voiceURI: "Google português" },
      COSYdeutsch: { lang: "de-DE", voiceURI: "Google Deutsch" },
      ΚΟΖΥελληνικά: { lang: "el-GR", voiceURI: "Google ελληνικά" },
      ТАКОЙрусский: { lang: "ru-RU", voiceURI: "Google русский" },
      ԾՈՍՅհայկական: { lang: "hy-AM", voiceURI: "" }
    };

    // Function to get the best available voice
    function getBestVoice(languageCode, voiceURI) {
      const voices = window.speechSynthesis.getVoices();
      
      // First try to find exact match by voiceURI
      if (voiceURI) {
        const exactVoice = voices.find(v => v.voiceURI === voiceURI);
        if (exactVoice) return exactVoice;
      }
      
      // Then try to find by language
      const langVoices = voices.filter(v => v.lang === languageCode);
      if (langVoices.length > 0) {
        // Prefer voices with localService (usually higher quality)
        const localServiceVoice = langVoices.find(v => v.localService);
        if (localServiceVoice) return localServiceVoice;
        
        // Return the first available voice for the language
        return langVoices[0];
      }
      
      // Fallback to any available voice
      return voices[0] || null;
    }

    // Function to speak text with selected voice and language
    function speakText(text, language) {
      if (!window.speechSynthesis) {
        console.warn("Speech synthesis not supported");
        return;
      }

      // Cancel any ongoing speech
      window.speechSynthesis.cancel();

      // Create a new utterance
      const utterance = new SpeechSynthesisUtterance(text);
      
      // Get voice settings for the language
      const voiceSettings = voiceLanguageMap[language] || voiceLanguageMap.COSYenglish;
      
      // Try to get the best voice available
      const voice = getBestVoice(voiceSettings.lang, voiceSettings.voiceURI);
      
      if (voice) {
        utterance.voice = voice;
        utterance.lang = voice.lang;
        
        // Adjust speech rate and pitch for more natural sound
        utterance.rate = 0.9; // Slightly slower than default
        utterance.pitch = 1.0; // Normal pitch
      }

      // Speak the text
      window.speechSynthesis.speak(utterance);
    }

    // Select DOM elements
    const languageSelect = document.getElementById("language-select");
    const daySelect = document.getElementById("day-select");
    const dayFromSelect = document.getElementById("day-from-select");
    const dayToSelect = document.getElementById("day-to-select");
    const practiceTypeSelect = document.getElementById("practice-type-select");
    const showButton = document.getElementById("show-button");
    const resultContainer = document.getElementById("result-container");

    // Validate range input: dayFrom <= dayTo
    function validDayRange(from, to) {
      if (!from || !to) return false;
      return Number(from) <= Number(to);
    }

    // Function to get random element from array
    function randomElement(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    // Main function to handle the "Show" button click
    showButton.addEventListener("click", () => {
      const language = languageSelect.value;
      const day = daySelect.value;
      const dayFrom = dayFromSelect.value;
      const dayTo = dayToSelect.value;
      const practiceType = practiceTypeSelect.value;

      // Clear previous result
      resultContainer.innerHTML = "";

      // Validation
      if (!language) {
        alert("Please select a language.");
        return;
      }
      if (!practiceType) {
        alert("Please select a type of practice.");
        return;
      }
      // Check that either day is selected OR a valid range is selected
      if (!day && !(dayFrom && dayTo && validDayRange(dayFrom, dayTo))) {
        alert("Please select either a day or a valid day range (from <= to).");
        return;
      }

      // Determine day(s) to select from
      let daysToUse = [];
      if (day) {
        daysToUse = [Number(day)];
      } else if (dayFrom && dayTo && validDayRange(dayFrom, dayTo)) {
        for (let d = Number(dayFrom); d <= Number(dayTo); d++) {
          daysToUse.push(d);
        }
      }

      // Depending on practiceType, get the random content
      switch (practiceType) {
        case "random_word":
          {
            // Random word from selected day(s)
            let combinedWords = [];
            for (const d of daysToUse) {
              if (vocabData[language][d]) combinedWords = combinedWords.concat(vocabData[language][d]);
            }
            if (combinedWords.length === 0) {
              resultContainer.textContent = "No words found for this selection.";
              break;
            }
            const word = randomElement(combinedWords);
            resultContainer.textContent = word;
            speakText(word, language);
          }
          break;

        case "random_grammar":
          {
            // Random grammar statement from selected day(s)
            let combinedGrammar = [];
            for (const d of daysToUse) {
              if (grammarData[language][d]) combinedGrammar = combinedGrammar.concat(grammarData[language][d]);
            }
            if (combinedGrammar.length === 0) {
              resultContainer.textContent = "No grammar data found for this selection.";
              break;
            }
            // Show only one random grammar statement
            const grammar = randomElement(combinedGrammar);
            resultContainer.textContent = grammar;
            speakText(grammar, language);
          }
          break;

        case "random_speaking":
          {
            // Random speaking phrase from selected day(s)
            let combinedSpeaking = [];
            for (const d of daysToUse) {
              if (speakingData[language][d]) combinedSpeaking = combinedSpeaking.concat(speakingData[language][d]);
            }
            if (combinedSpeaking.length === 0) {
              resultContainer.textContent = "No speaking data found for this selection.";
              break;
            }
            const phrase = randomElement(combinedSpeaking);
            resultContainer.textContent = phrase;
            speakText(phrase, language);
          }
          break;

        case "random_image":
          {
            // Random image from selected day(s)
            let combinedImages = [];
            for (const d of daysToUse) {
              if (imageData.allLanguages[d]) {
                combinedImages = combinedImages.concat(imageData.allLanguages[d]);
              }
            }
            if (combinedImages.length === 0) {
              resultContainer.textContent = "No images found for this selection.";
              break;
            }
            const imgObj = randomElement(combinedImages);
            
            // Create container for image and caption
            const container = document.createElement("div");
            container.className = "image-container";
            
            // Create image element
            const imgElem = document.createElement("img");
            imgElem.src = imgObj.src;
            imgElem.className = "vocab-image";
            
            // Use translated alt text if available
            const altText = imgObj.translations?.[language] || imgObj.alt || "Image";
            imgElem.alt = altText;
            
            // Create caption element
            const caption = document.createElement("div");
            caption.className = "image-caption";
            caption.textContent = altText;
            
            // Add click event to toggle caption visibility
            imgElem.addEventListener("click", () => {
              caption.style.display = caption.style.display === "none" ? "block" : "none";
            });
            
            // Initially hide the caption
            caption.style.display = "none";
            
            // Add elements to container
            container.appendChild(imgElem);
            container.appendChild(caption);
            
            // Add container to result
            resultContainer.appendChild(container);
            
            // Note: Removed the automatic speaking of the alt text
          }
          break;

        default:
          resultContainer.textContent = "Invalid practice type selected.";
      }
    });

    // Load voices asynchronously - workaround for some browsers
    if (typeof speechSynthesis !== "undefined") {
      // Some browsers need this to populate voices
      speechSynthesis.onvoiceschanged = () => {
        console.log("Voices changed, available voices:", window.speechSynthesis.getVoices());
      };
      
      // Try to preload voices
      window.speechSynthesis.getVoices();
    }
  </script>

</body>
</html>
